{% extends request.htmx|yesno:"base_htmx.html,base.html" %}

{% load date_utils %}

{% block page_title %}Bookings{% endblock %}

{% block subtitle %}
    <h2>Bookings {{ date|date:"F Y" }}</h2>
{% endblock %}

{% block content %}
    <div id="calender">
        <div class="calender-controls">
            <h1>Bookings {{ date|date:"F Y" }}</h1>
            <div hx-boost="true" hx-target="#calender" hx-swap="outerHTML">
                <a href="{% url 'booking_calender_month'%}">Today</a>
                <a role="button"
                   aria-label="Previous Month"
                   title="{{ prev_month|date:'F Y' }}"
                   href="{% url 'booking_calender_month' year=prev_month.year month=prev_month.month %}"
                >
                    {% include 'icons/chevron-left.svg' %}
                </a>
                <a role="button"
                   aria-label="Next Month"
                   title="{{ next_month|date:'F Y' }}"
                   href="{% url 'booking_calender_month' year=next_month.year month=next_month.month %}"
                >
                    {% include 'icons/chevron-right.svg' %}
                </a>
            </div>
        </div>
        <div class="calender grid">
            {% for day in days %}
                <div class="heading">{{ day|day_of_week }}</div>
            {% endfor %}
            {% for day, bookings in calendar %}
                <div class="{% if day.month == date.month %}current{% endif %} {% if day == today %}today{% endif %}">
                    <a href="{% url 'booking_calender_day' year=day.year month=day.month day=day.day %}">
                        {{ day|date:"d" }}
                    </a>
                    <ul>
                        {% for booking in bookings %}
                            <li style="--display-colour: {{ booking.service.display_colour }}">{{ booking.start|time:"H:i" }} - {{ booking.end|time:"H:i" }} - {{ booking.pet }} - {{ booking.service }}</li>
                        {% endfor %}
                    </ul>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
