{% extends 'base.html' %}

{% load field_tags %}

{% block breadcrumbs %}
    <div class="container">
        <nav class="breadcrumb" aria-label="breadcrumbs">
            <ul>
                <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
                <li><a href="{% url 'customer_list' %}">Customers</a></li>
                <li class="is-active"><a aria-current="page" href="{% url 'customer_detail' object.id %}">{{ object.name }}</a></li>
            </ul>
        </nav>
    </div>
{% endblock %}

{% block content %}
    <div class="block">
        <a href="{% url 'customer_update' customer.id %}">Edit</a>
        <a hx-get="{% url 'customer_delete' customer.id %}" hx-swap="afterend" href="{% url 'customer_delete' customer.id %}">Delete</a>
    </div>

    <div class="block">{{ customer.name }}</div>
    <div class="block">{{ customer.invoice_email }}</div>
    <div class="block">{{ customer.invoice_address|linebreaks }}</div>

    <h3 class="title is-4">Pets</h3>
    <div class="columns is-multiline">
        {% for pet in customer.active_pets %}
            <div class="column is-one-third">
                {% include "components/card.html" with title=pet.name type="Pet" description=pet.description %}
            </div>
        {% endfor %}
    </div>

    <h3 class="title is-4">Contacts</h3>
    <div class="columns">
        {% for contact in customer.contacts.all %}
            <div class="column is-one-quarter">
                {% include "components/card.html" with title=contact.name type="Contact" description=contact.details %}
            </div>
        {% endfor %}
    </div>
{% endblock %}
