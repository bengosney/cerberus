{% extends request.htmx|yesno:"base_htmx.html,base.html" %}

{% load django_htmx %}

{% block subtitle %}
  <h2 class="subtitle">Customers</h2>
{% endblock %}

{% block breadcrumbs %}
  <div class="container">
    <nav class="breadcrumb" aria-label="breadcrumbs">
      <ul>
        <li><a href="{% url 'dashboard' %}">Dashboard</a></li>
        <li class="is-active"><a aria-current="page" href="{% url 'customer_list' %}">Customers</a></li>
      </ul>
    </nav>
  </div>
{% endblock %}

{% block content %}
  <div id="customer-list">
    <table class="table">
      {% include "components/pagination.html" with hx_target="#customer-list" %}
      <thead>
        <tr>
          <th>Name</th>
          <th>Pets</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for customer in object_list %}
          <tr>
            <td>{{ customer.name }}</td>
            <td>{{ customer.active_pets|join:", " }}</td>
            <td>
              <a href="{% url 'customer_detail' customer.id %}">details</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    {% include "components/pagination.html" with hx_target="#customer-list" %}
  </div>
{% endblock %}
