(()=>{var m=Math.round,c=document;var f="toast-container",M=()=>{let t=c.createElement("div");return t.className=f,c.body.appendChild(t),t},S=()=>c.querySelector(`.${f}`)||M(),d=(t,e="info",n=3e3)=>{let r=S(),o=c.createElement("div");o.classList.add("toast",e),o.innerHTML=t,r.appendChild(o),o.addEventListener("click",()=>o.classList.add("remove")),o.addEventListener("animationend",i=>{switch(i.animationName){case"remove":r.removeChild(o);break;case"add":setTimeout(()=>o.classList.add("remove"),n);break}})};var l=(t,e,n)=>{t.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:n}))};var x=async(t,e)=>{let n=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":window.CSRFToken},body:JSON.stringify(e)}),r=await n.json();if(!n.ok||!r){let o=r.detail||n.statusText;throw new Error(o)}return r},T=async(t,e,n)=>{let r=e.querySelector(n)||e,o=t.parentElement,{moveUrl:i}=t.dataset;if(i){t.matches(n)&&r.matches(n)?(Array.from(t.children).forEach(s=>r.appendChild(s)),t.remove()):r.appendChild(t);let{datetime:g}=e.dataset;try{let s=await x(i,{to:g});return d("Saved: OK","success"),l(t,"booking-moved",s),s}catch(s){return o&&o.appendChild(t),d(`${s}`,"error"),{}}}else throw new Error("Move URL is not provided.")};var h=(t,e)=>t.toString().padStart(e,"0").slice(-e);var p=t=>h(t,2),u=t=>{let e=typeof t=="string"?new Date(t):t;return`${e.getFullYear()}-${p(e.getMonth()+1)}-${p(e.getDate())}T${p(e.getHours())}:${p(e.getMinutes())}`},w=(t,e=15)=>{let n=new Date(t);return n.setMilliseconds(m(n.getMilliseconds()/1e3)*1e3),n.setSeconds(m(n.getSeconds()/60)*60),n.setMinutes(m(n.getMinutes()/e)*e),u(n)},v=(t,e)=>new Date(new Date(t).getTime()+e*6e4);var y=async(t,e,n,r=5)=>{let o=new URLSearchParams({startswith:e,limit:`${r}`,tags:n.join(",")});return await(await fetch(`${t}?${o.toString()}`)).json()};var a=window;a.moveBooking=T;a.toast=d;a.roundTime=w;a.addMinutes=v;a.dateToString=u;a.fetchTags=y;})();
//# sourceMappingURL=main.min.js.map
